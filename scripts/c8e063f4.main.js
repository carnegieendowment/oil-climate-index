var utils;!function(){"use strict";utils={generateSocialLinks:function(a){var b="Explore the true cost of technological advancements across the complete oil supply chain.",c="The Oil-Climate Index",d="https://twitter.com/share?text="+b+"&url="+a,e="http://www.linkedin.com/shareArticle?mini=true&summary="+b+"&title="+c+"&url="+a,f="mailto:?subject="+c+"&body="+b+"\n\n"+a;return{twitter:d,linkedIn:e,mail:f}},prettyOilName:function(a){return a.Unique},cloneObject:function(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=this.cloneObject(a[c]);return b},getValueForRatio:function(a,b,c){switch(b){case"perBarrel":return a;case"perMJ":return a*(1/c.MJperbbl);case"perDollar":return a*(1/this.getPricePerBarrel(c));default:return a}},getPricePerBarrel:function(a){var b=a["Portion Blended Gasoline"]*Oci.prices.gasoline.price+a["Portion Jet-A/AVTUR"]*Oci.prices.jetFuel.price+a["Portion ULSD"]*Oci.prices.diesel.price+a["Portion Fuel Oil"]*Oci.prices.fuelOil.price+a["Portion Coke"]*Oci.prices.coke.price+a["Portion Bunker C"]*Oci.prices.bunkerFuel.price,c=d3.sum([a["Portion Blended Gasoline"],a["Portion Jet-A/AVTUR"],a["Portion ULSD"],a["Portion Fuel Oil"],a["Portion Coke"],a["Portion Bunker C"]]);return b/c},categoryColorForType:function(a){var b=["#003A63","#009444","#231F20","#006838","#645A4F","#006AA7","#CCC7C2","#8DC63F","#0095DA"],c=d3.scale.ordinal().domain(d3.range(9)).range(b);switch(a){case"Ultra-Deep":return c(0);case"Light":return c(1);case"Extra-Heavy":return c(2);case"High Flare":return c(3);case"Heavy":return c(4);case"High Steam":return c(5);case"High Gas":return c(6);case"Conventional":return c(7);case"Depleted Oil":return c(8);default:return console.warn("Invalid oil type for color",a),"#ccc"}},buildShareURLFromParameters:function(a){if(!a||""===a)return"";var b=[];for(var c in a)b.push(c+"="+a[c]);var d;d=0===b.length?"":"?"+b.join("&");var e=window.location.hash.split("?")[0],f=window.location.pathname,g=window.location.origin+f+e+d;return g},parseParametersFromShareURL:function(a){if(!a||""===a)return{};var b=a.split("?");if(2!==b.length)return{};for(var c=b[1].split("&"),d={},e=0;e<c.length;e++){var f=c[e].split("=");if(2!==f.length)return{};d[f[0]]=f[1]}return d},makeId:function(a){return a.toLowerCase().replace(/ /g,"-")},capitalize:function(a){return a?a[0].toUpperCase()+a.slice(1):""},numberWithCommas:function(a){return a.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")},setInputFieldOption:function(a,b){for(var c=document.getElementsByName(a),d=0;d<c.length;d++)if(c[d].value===b){c[d].checked=!0;break}},getDatasetKey:function(a){switch(a){case"apiGravity":return"API";case"oilDepth":return"Field Depth";case"waterToOilRatio":return"Water-to-Oil-Ratio";case"gasToOilRatio":return"Gas-to-Oil-Ratio";case"ghgTotal":return"Total Emissions";case"transport":return"Transport Emissions";case"productionVolume":return"Oil Production Volume";default:return console.warn("Unknown key")}},getUnits:function(a,b){var c=function(a){switch(a){case"perBarrel":return"kgCO2eq/bbl";case"perMJ":return"kgCO2eq/MJ";case"perDollar":return"kgCO2eq/$";default:return console.warn("unknown sort ratio"),""}};switch(a){case"apiGravity":return"deg API";case"oilDepth":return"feet";case"waterToOilRatio":return"bbl water/bbl oil";case"gasToOilRatio":return"scf/bbl oil";case"productionVolume":return"bbl crude";case"ghgTotal":case"upstream":case"midstream":case"downstream":return c(b)}},getDatasetName:function(a,b){var c=function(a,b){if(!b)return a;switch(b){case"perBarrel":return a+=" Per Barrel";case"perMJ":return a+=" Per Megajoule";case"perDollar":return a+=" Per Dollar";default:return console.warn("Unknown sort ratio"),a}};switch(a){case"apiGravity":return"API Gravity";case"oilDepth":return"Field Depth";case"waterToOilRatio":return"Water-to-Oil Ratio";case"gasToOilRatio":return"Gas-to-Oil Ratio";case"productionVolume":return"Production Volume";case"ghgTotal":case"midstream":case"upstream":case"downstream":return c("Total Greenhouse Gas Emissions",b);default:return console.warn("Unknown key"),""}},indexInArray:function(a,b){for(var c=-1,d=0;d<a.length;d++)if(a[d]==b){c=d;break}return c},getOPGEEModel:function(a,b,c){var d=Oci.data.metadata,e=this.indexInArray(this.trimMetadataArray(d.water.split(",")),a),f=this.indexInArray(this.trimMetadataArray(d.steam.split(",")),b),g=this.indexInArray(this.trimMetadataArray(d.flare.split(",")),c),h="run";return h+=-1===e||-1===f||-1===g?"000":[e,f,g].join("")},getPRELIMModel:function(a){var b=Oci.data.metadata,c=this.trimMetadataArray(b.refinery.split(",")).indexOf(a),d="run";return d+=-1===c?"0":c},getCombustionTotal:function(a,b){var c=[a["Blended Gasoline"],a["Jet-A/AVTUR"],a.ULSD,a["Fuel Oil"],a.Coke,a["Bunker C"],a["Light Ends (RFG)"],a["Pet Coke (Upgrading) - Net Upstream Use)"]],d=[a["Blended Gasoline"],a["Jet-A/AVTUR"],a.ULSD,a["Fuel Oil"],a["Bunker C"],a["Light Ends (RFG)"]],e=b?c:d;return d3.sum(e)},getDownstreamComponents:function(a,b,c){var d=["Heat","Steam","Electricity","Hydrogen","FCC","Excess","Portion","Total","Unique","MJperbbl"];b===!0&&(d.push("Coke"),d.push("Pet"));var e=_.map(a,function(a,b){return{name:b,value:a}});return e.push({name:"Transport to Refinery",value:c}),_.filter(e,function(a){return!_.contains(d,a.name.split(" ")[0])&&Number(a.value)>.001})},getRefiningComponents:function(a){var b=["Heat","Steam","Electricity","Hydrogen","FCC","Excess"],c=_.map(a,function(a,b){return{name:b,value:a}});return _.filter(c,function(a){return _.contains(b,a.name.split(" ")[0])&&Number(a.value)>.001})},getExtractionComponents:function(a){var b=["Water-to-Oil-Ratio","Net","API","Gas-to-Oil-Ratio","Unique"],c=_.map(a,function(a,b){return{name:b,value:a}});return _.filter(c,function(a){return!_.contains(b,a.name.split(" ")[0])&&Number(a.value)>.001})},getRefiningTotal:function(a){return a["Total refinery processes "]},trimMetadataArray:function(a){return a.map(function(a){return a.trim()})},createTooltipHtml:function(a,b,c,d,e){for(var f="",g=0;g<c.length;g++)f+="<dt>"+c[g].name+"</dt>",f+="<dd>"+c[g].value+"</dd>";var h='<div class="popover top in"><div class="popover-inner"><div class="popover-header"><p class="popover-meta oil-type"><span class="swatch"></span>'+b+'</p><h3 class="popover-title">'+a+"</h3>"+(e?'<p class="description">'+e+"</p>":"")+'</div><div class="popover-body"><dl class="stats-list">'+f+'</dl></div><div class="popover-footer"><p><a href="#oil/'+d+'" title="View oil profile" class="view-more">View details</a></p></div></div></div>';return h},insideTooltip:function(a,b){var c=$(".d3-tip")[0].getBoundingClientRect();return a>c.left-30&&a<c.right&&b<c.bottom+30&&b>c.top},initDropdown:function(){$('[data-toggle="dropdown"]:not(.dropdown-processed)').click(function(a){a.preventDefault(),a.stopPropagation(),$(this).addClass("dropdown-processed");var b=$(this).parent(".dropdown");b.toggleClass("open"),Oci.view.shareOpen(),$(".dropdown.open").not(b).removeClass("open")})}}}(),window.Oci={Models:{},Collections:{},Views:{},Routers:{},init:function(){"use strict";Oci.getData(),Oci.getPrices(),Oci.router=new Oci.Routers.Router,Backbone.history.start()},getData:function(){"use strict";$.ajax({type:"GET",url:"./data/oils.json",dataType:"json",success:function(a){Oci.data=a},async:!1})},getPrices:function(){"use strict";$.ajax({type:"GET",url:"./data/prices.json",dataType:"json",success:function(a){Oci.prices=a},async:!1})},showPricesModal:function(a){"use strict";a?$("#modal-prices").addClass("revealed"):$("#modal-prices").removeClass("revealed")},prices:{},data:{}},$(document).ready(function(){"use strict";Oci.init(),$("[data-dropdown-nav]").click(function(a){a.preventDefault(),a.stopPropagation(),$(this).parents("nav.page-nav").toggleClass("open")}),$(document).click(function(){$("nav.page-nav").removeClass("open")})}),this.JST=this.JST||{},this.JST["app/scripts/templates/compareoils.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<section id="compare-oils-view" class="view">\n\n  <!-- intro -->\n  <div class="intro">\n    <div class="prose">\n      <h1 class="prose-prime-title">Compare Oils across Supply Chain</h1>\n      <p>The only way to determine the true cost of these resources is to assess the environmental impact of the complete oil supply chain, including extraction, refining, transportation, and combustion.</p>\n    </div>\n    <div class="actions">\n      <ul class="actions-list">\n        <li class="dropdown">\n          <a href="#" title="Share" class="bttn bttn-m bttn-base-light share" data-toggle="dropdown">Share</a>\n          <div class="dropdown-content right">\n            <ul class="dropdown-menu" role="menu">\n              <li class="sep has-icon-before twitter"><a href="" target="_blank" title="Share on Twitter">Twitter</a></li>\n              <li class="sep has-icon-before facebook"><a href="http://facebook.com/sharer.php" target="_blank" title="Share on Facebook">Facebook</a></li>\n              <li class="sep has-icon-before linkedin"><a href="" target="_blank" title="Share on LinkedIn">LinkedIn</a></li>\n              <li class="sep has-icon-before email"><a href="" title="Share by email">Email</a></li>\n            </ul>\n            <div class="input-group dropdown-footer">\n              <input class="form-control input-s" type="text" id="share-copy" value="" readonly />\n              <a href="#" title="Copy to clipboard" class="bttn bttn-s bttn-base-light copy hide-txt" id="compare-oils-share" data-title="Copy to clipboard"><span>Copy to clipboard</span></a>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <!--/ intro -->\n\n  <!-- chart-section -->\n  <div class="row">\n    <section class="panel has-aside" id="co-chart-cont">\n      <header class="panel-header">\n        <div class="panel-headline">\n          <h1 class="panel-title">Chart</h1>\n        </div>\n      </header>\n      <div class="panel-body">\n        <div class="chart-legend">\n          <dl class="key">\n            <dt class="key-title">Key</dt>\n            <dd class="key-item upstream">Upstream</dd>\n            <dd class="key-item midstream">Midstream</dd>\n            <dd class="key-item downstream">Downstream</dd>\n          </dl>\n        </div>\n        <div id="compare-oils" class="data-charts"></div>\n      </div>\n      <div class="panel-aside">\n        <div class="data-controls">\n\n          <!-- model-parameters -->\n          <div id="model-parameters" class="control-section"></div>\n          <!--/ model-parameters -->\n\n          <form>\n            <div class="control-section">\n              <fieldset id="ratio-select">\n                <legend class="control-title">Sort by Ratio</legend>\n                <div class="radio">\n                  <label><input type="radio" name="ratio-select" value="perBarrel" checked> GHGs/Barrel</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="ratio-select" value="perMJ"> GHGs/MJ</label>\n                </div>\n                <div class="radio has-button">\n                  <label><input type="radio" name="ratio-select" value="perDollar"> GHGs/$</label>\n                  <a href="#" id="price-button" title="Adjust values" class="bttn bttn-base-light bttn-xs edit">Values</a>\n                </div>\n              </fieldset>\n            </div>\n\n            <div class="control-section">\n              <fieldset id="step-select">\n                <legend class="control-title">Sort by Step</legend>\n                <div class="radio">\n                  <label><input type="radio" name="step-select" value="ghgTotal" checked> Total GHGs</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="step-select" value="upstream"> Upstream</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="step-select" value="midstream"> Midstream</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="step-select" value="downstream"> Downstream</label>\n                </div>\n              </fieldset>\n            </div>\n\n            <div class="control-section">\n              <fieldset id="sort-select">\n                <legend class="control-title">Sort order</legend>\n                <div class="radio">\n                  <label><input type="radio" name="sort-select" value="true" checked> High-to-Low</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="sort-select" value="false"> Low-to-High</label>\n                </div>\n              </fieldset>\n            </div>\n          </form>\n\n        </div>\n      </div>\n    </section>\n  </div>\n  <!--/ chart-section -->\n\n</section>\n';return __p},this.JST["app/scripts/templates/emissionsdrivers.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<section id="emissions-drivers-view" class="view">\n\n  <!-- intro -->\n  <div class="intro">\n    <div class="prose">\n      <h1 class="prose-prime-title">Explore Emissions Drivers</h1>\n      <p>Total greenhouse gas emissions are affected by a number of upstream and downstream factors. Select different options to see the effects of processing choices on supply chain emissions.</p>\n    </div>\n    <div class="actions">\n      <ul class="actions-list">\n        <li class="dropdown">\n          <a href="#" title="Share" class="bttn bttn-m bttn-base-light share" data-toggle="dropdown">Share</a>\n          <div class="dropdown-content right">\n            <ul class="dropdown-menu" role="menu">\n              <li class="sep has-icon-before twitter"><a href="" target="_blank" title="Share on Twitter">Twitter</a></li>\n              <li class="sep has-icon-before facebook"><a href="http://facebook.com/sharer.php" target="_blank" title="Share on Facebook">Facebook</a></li>\n              <li class="sep has-icon-before linkedin"><a href="" target="_blank" title="Share on LinkedIn">LinkedIn</a></li>\n              <li class="sep has-icon-before email"><a href="" title="Share by email">Email</a></li>\n            </ul>\n            <div class="input-group dropdown-footer">\n              <input class="form-control input-s" type="text" id="share-copy" value="" readonly />\n              <a href="#" title="Copy to clipboard" class="bttn bttn-s bttn-base-light copy hide-txt" id="emissions-drivers-share" data-title="Copy to clipboard"><span>Copy to clipboard</span></a>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <!--/ intro -->\n\n  <!-- chart-section -->\n  <div class="row">\n    <section class="panel has-aside" id="ed-chart-cont">\n      <header class="panel-header">\n        <div class="panel-headline">\n          <h1 class="panel-title">Chart</h1>\n        </div>\n      </header>\n      <div class="panel-body">\n        <div id="emissions-drivers" class="data-charts"></div>\n      </div>\n      <div class="panel-aside">\n        <div class="data-controls">\n\n          <!-- model-parameters -->\n          <div id="model-parameters" class="control-section"></div>\n          <!--/ model-parameters -->\n\n          <form>\n            <div class="control-section">\n              <fieldset id="ratio-select">\n                <legend class="control-title">Sort by Ratio</legend>\n                <div class="radio">\n                  <label><input type="radio" name="ratio-select" value="perBarrel" checked> GHGs/Barrel</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="ratio-select" value="perMJ"> GHGs/MJ</label>\n                </div>\n                <div class="radio has-button">\n                  <label><input type="radio" name="ratio-select" value="perDollar"> GHGs/$</label>\n                  <a href="#" id="price-button" title="Adjust values" class="bttn bttn-base-light bttn-xs edit">Values</a>\n                </div>\n              </fieldset>\n            </div>\n\n            <div class="control-section">\n              <fieldset id="x-select">\n                <legend class="control-title">X Axis</legend>\n                <div class="radio">\n                  <label><input type="radio" name="x-select" value="apiGravity" checked> API Gravity</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="x-select" value="oilDepth"> Oil Depth</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="x-select" value="waterToOilRatio"> Water-to-Oil Ratio</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="x-select" value="gasToOilRatio"> Gas-to-Oil Ratio</label>\n                </div>\n              </fieldset>\n            </div>\n\n            <div class="control-section">\n              <fieldset id="y-select">\n                <legend class="control-title">Y Axis</legend>\n                <div class="radio">\n                  <label><input type="radio" name="y-select" value="ghgTotal" checked> Total GHGs</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="y-select" value="upstream"> Upstream</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="y-select" value="midstream"> Midstream</label>\n                </div>\n                <div class="radio">\n                  <label><input type="radio" name="y-select" value="downstream"> Downstream</label>\n                </div>\n              </fieldset>\n            </div>\n          </form>\n\n        </div>\n      </div>\n    </section>\n  </div>\n  <!--/ chart-section -->\n\n</section>\n';return __p},this.JST["app/scripts/templates/modelparameters.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<h3 class="control-title"><a href="#" class="toggle" title="Show model parameters">Model parameters</a></h3>\n<div class="mp-summary">\n  <dl class="mp-list">\n    <dt class="key">Flaring-to-Oil Ratio</dt>\n    <dd class="value flare" title="Flaring-to-Oil Ratio"><span></span></dd>\n    <dt class="key">Steam-to-Oil Ratio</dt>\n    <dd class="value steam" title="Steam-to-Oil Ratio"><span></span></dd>\n    <dt class="key">Water Intensity</dt>\n    <dd class="value water" title="Water Intensity"><span></span></dd>\n    <dt class="key">Refinery Configuration</dt>\n    <dd class="value refinery" title="Refinery Configuration"><span></span></dd>\n    <dt class="key">Petcoke Combustion</dt>\n    <dd class="value petcoke" title="Petcoke Combustion"><span></span></dd>\n  </dl>\n</div>\n<div class="mp-edit">\n  <div class="param-control flare">\n    <strong class="param-title">Flaring-to-Oil Ratio</strong>\n    <div class="slider" id="slider-flaring"></div>\n  </div>\n  <div class="param-control steam">\n    <strong class="param-title">Steam-to-Oil Ratio</strong>\n    <div class="slider" id="slider-steam"></div>\n  </div>\n  <div class="param-control water">\n    <strong class="param-title">Water Intensity</strong>\n    <div class="slider" id="slider-water"></div>\n  </div>\n  <div class="param-control refinery">\n    <strong class="param-title">Refinery Configuration</strong>\n    <select class="config-dropdown form-control" id="dropdown-refinery">\n      <option value="0 = Default">Default</option>\n      <option value="1 = Hydroskimming">Hydroskimming</option>\n      <option value="2 = Medium Conversion">Medium Conversion</option>\n      <option value="3 = Deep Coking">Deep Conversion: Coking</option>\n      <option value="4 = Deep Hydrotreating">Deep Conversion: Hydrocracking</option>\n    </select>\n  </div>\n  <div class="param-control petcoke">\n    <strong class="param-title">Petcoke Combustion</strong>\n    <label class="switch" for="toggle-petcoke">\n      <input id="toggle-petcoke" type="checkbox" checked />\n      <span class="swtich-text">Petcoke combustion</span>\n      <span class="switch-ui"></span>\n    </label>\n  </div>\n</div>\n';return __p},this.JST["app/scripts/templates/oildetails.ejs"]=function(obj){obj||(obj={});{var __t,__p="";_.escape,Array.prototype.join}with(obj)__p+='<section id="oil-details-view" class="view">\n\n  <!-- intro -->\n  <div class="intro">\n    <div class="prose">\n      <p class="prose-meta">Oil details</p>\n      <h1 class="prose-prime-title" id="oil-name"><!-- oil name --></h1>\n      <div id="oil-details-description" class="prose-body"><!-- oil description --></div>\n    </div>\n    <div class="actions">\n      <ul class="actions-list">\n        <li><a href="#" title="Download" class="bttn bttn-m bttn-base-light download">Download</a></li>\n        <li class="dropdown">\n          <a href="#" title="Share" class="bttn bttn-m bttn-base-light share" data-toggle="dropdown">Share</a>\n          <div class="dropdown-content right">\n            <ul class="dropdown-menu" role="menu">\n              <li class="sep has-icon-before twitter"><a href="" target="_blank" title="Share on Twitter">Twitter</a></li>\n              <li class="sep has-icon-before facebook"><a href="http://facebook.com/sharer.php" target="_blank" title="Share on Facebook">Facebook</a></li>\n              <li class="sep has-icon-before linkedin"><a href="" target="_blank" title="Share on LinkedIn">LinkedIn</a></li>\n              <li class="sep has-icon-before email"><a href="" title="Share by email">Email</a></li>\n            </ul>\n            <div class="input-group dropdown-footer">\n              <input class="form-control input-s" type="text" id="share-copy" value="" readonly />\n              <a href="#" title="Copy to clipboard" class="bttn bttn-s bttn-base-light copy hide-txt" id="oil-details-share" data-title="Copy to clipboard"><span>Copy to clipboard</span></a>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <!--/ intro -->\n\n  <!-- chart-section -->\n  <div class="row">\n    <section class="panel has-aside" id="od-chart-cont">\n      <header class="panel-header">\n        <div class="panel-headline">\n          <h1 class="panel-title">Chart</h1>\n        </div>\n      </header>\n      <div class="panel-body">\n        <div class="data-charts">\n          <div class="chart-item">\n            <h3>TOTAL GREENHOUSE GAS EMISSIONS PER BARREL</h3>\n            <p class="value"><span id="model-total"></span> <sub class="raw" id="default-total"></sub></p>\n          </div>\n          <div class="chart-item">\n            <h3>Upstream</h3>\n            <div class="bar" id="upstream-bar"></div>\n          </div>\n          <div class="chart-item">\n            <h3>Midstream</h3>\n            <div class="bar" id="midstream-bar"></div>\n          </div>\n          <div class="chart-item">\n            <h3>Downstream</h3>\n            <div class="bar" id="downstream-bar"></div>\n          </div>\n        </div>\n      </div>\n\n      <div class="panel-aside">\n        <div class="data-controls">\n\n          <!-- model-parameters -->\n          <div id="model-parameters" class="control-section static"></div>\n          <!--/ model-parameters -->\n\n        </div>\n      </div>\n    </section>\n  </div>\n  <!--/ chart-section -->\n\n  <!-- details -->\n  <div class="row details">\n\n    ',oil.keyStats.length&&(__p+='\n    <section id="key-stats-cont" class="panel panel-m">\n      <header class="panel-header">\n        <div class="panel-headline">\n          <h1 class="panel-title">Key Stats</h1>\n        </div>\n      </header>\n      <div class="panel-body">\n        <dl class="stats-list">\n          ',_.each(oil.keyStats,function(a){__p+="\n          <dt>"+(null==(__t=a.key)?"":__t)+"</dt>\n          <dd title='"+(null==(__t=a.title)?"":__t)+"'>"+(null==(__t=a.value)?"":__t)+"</dd>\n          "}),__p+="\n        </dl>\n      </div>\n    </section>\n    "),__p+='\n\n    <section id="map-locations-cont" class="panel panel-m">\n      <header class="panel-header">\n        <div class="panel-headline">\n          <h1 class="panel-title">Map locations</h1>\n        </div>\n      </header>\n      <div class="panel-body">\n        <div id="map"></div>\n      </div>\n    </section>\n  </div>\n  <!--/ details -->\n\n</section>\n';return __p},this.JST["app/scripts/templates/prices.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<div class="modal-inner">\n  <header class="modal-header">\n    <h1 class="modal-title">Adjust values</h1>\n    <a href="#" title="Close" class="modal-close" data-modal-dismiss><span>Close</span></a>\n  </header>\n  <div class="modal-body">\n    <form class="form-horizontal">\n      <div class="form-group">\n        <label for="gasoline">Gasoline</label>\n        <div class="input-group">\n          <div class="input-group-addon">$</div>\n          <input class="form-control price-input" type="text" name="gasoline" id="gasoline" placeholder="Price" />\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="diesel">Diesel</label>\n        <div class="input-group">\n          <div class="input-group-addon">$</div>\n          <input class="form-control price-input" type="text" name="diesel" id="diesel" placeholder="Price" />\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="jetFuel">Jet Fuel</label>\n        <div class="input-group">\n          <div class="input-group-addon">$</div>\n          <input class="form-control price-input" type="text" name="jetFuel" id="jetFuel" placeholder="Price" />\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="bunkerFuel">Bunker Fuel</label>\n        <div class="input-group">\n          <div class="input-group-addon">$</div>\n          <input class="form-control price-input" type="text" name="bunkerFuel" id="bunkerFuel" placeholder="Price" />\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="fuelOil">Fuel Oil</label>\n        <div class="input-group">\n          <div class="input-group-addon">$</div>\n          <input class="form-control price-input" type="text" name="fuelOil" id="fuelOil" placeholder="Price" />\n        </div>\n      </div>\n      <div class="form-group">\n        <label for="coke">Coke</label>\n        <div class="input-group">\n          <div class="input-group-addon">$</div>\n          <input class="form-control price-input" type="text" name="coke" id="coke" placeholder="Price" />\n        </div>\n      </div>\n    </form>\n  </div>\n  <footer class="modal-footer">\n    <button type="button" title="Cancel" class="bttn bttn-m bttn-base-light cancel" data-modal-dismiss>Cancel</button>\n    <button type="button" title="Apply" class="bttn bttn-m bttn-base apply" id="apply-prices">Apply</button>\n  </footer>\n</div>\n';return __p},this.JST["app/scripts/templates/supplycurve.ejs"]=function(obj){obj||(obj={});{var __p="";_.escape}with(obj)__p+='<section id="supply-curve-view" class="view">\n\n  <!-- intro -->\n  <div class="intro">\n    <div class="prose">\n      <h1 class="prose-prime-title">Total Emissions by Production Volume</h1>\n      <p>The oil industry is changing. Explore the true cost of technological advancements by assessing the environmental impact of the complete oil supply chain.</p>\n      <p>Advancements in technology mean that unconventional hydrocarbon deposits in once-unreachable areas are now viable, extractable resources.</p>\n    </div>\n    <div class="actions">\n      <ul class="actions-list">\n        <li class="dropdown">\n          <a href="#" title="Share" class="bttn bttn-m bttn-base-light share" data-toggle="dropdown">Share</a>\n          <div class="dropdown-content right">\n            <ul class="dropdown-menu" role="menu">\n              <li class="sep has-icon-before twitter"><a href="" target="_blank" title="Share on Twitter">Twitter</a></li>\n              <li class="sep has-icon-before facebook"><a href="http://facebook.com/sharer.php" target="_blank" title="Share on Facebook">Facebook</a></li>\n              <li class="sep has-icon-before linkedin"><a href="" target="_blank" title="Share on LinkedIn">LinkedIn</a></li>\n              <li class="sep has-icon-before email"><a href="" title="Share by email">Email</a></li>\n            </ul>\n            <div class="input-group dropdown-footer">\n              <input class="form-control input-s" type="text" id="share-copy" value="" readonly />\n              <a href="#" title="Copy to clipboard" class="bttn bttn-s bttn-base-light copy hide-txt" id="supply-curve-share" data-title="Copy to clipboard"><span>Copy to clipboard</span></a>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <!--/ intro -->\n\n  <!-- chart-section -->\n  <div class="row">\n    <section class="panel" id="sc-chart-cont">\n      <header class="panel-header">\n        <div class="panel-headline">\n          <h1 class="panel-title">Chart</h1>\n        </div>\n      </header>\n      <div class="panel-body">\n        <div id="supply-curve" class="data-charts"></div>\n      </div>\n    </section>\n  </div>\n  <!--/ chart-section -->\n\n</section>\n';return __p},Oci.Routers=Oci.Routers||{},function(){"use strict";var a=5e3;Oci.Routers.Router=Backbone.Router.extend({initialize:function(){new Oci.Views.Prices},routes:{"":"supplyCurve",compare:"compareOils",emissions:"emissionsDrivers","oil/:id":"oilDetails",demo:"playDemo"},playDemo:function(){var b=this,c=0,d=function(){switch(c){case 0:b.execute(b.supplyCurve,[null]);break;case 1:b.execute(b.compareOils,[null]);break;case 2:b.execute(b.emissionsDrivers,[null]);break;case 3:b.execute(b.oilDetails,["us-alaskan-north-slope",null])}setTimeout(function(){c=(c+1)%4,d()},a)};d()},execute:function(a,b){this.allRoutes(),a&&a.apply(this,b)},supplyCurve:function(){Oci.view=new Oci.Views.SupplyCurve,$("#menu-supply").addClass("active")},compareOils:function(){Oci.view=new Oci.Views.CompareOils,$("#menu-compare").addClass("active")},emissionsDrivers:function(){Oci.view=new Oci.Views.EmissionsDrivers,$("#menu-emissions").addClass("active")},oilDetails:function(a){Oci.view=new Oci.Views.OilDetails({oil:a}),$(window).scrollTop(0)},allRoutes:function(){Oci.view&&($("body").unbind(),$(window).off("resize"),Oci.view.undelegateEvents(),$(".d3-tip").remove(),$("#menu-block li").removeClass("active"),$("#menu-supply").removeClass("active"))}})}(),Oci.Views=Oci.Views||{},function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n="#supply-curve",o={top:8,right:8,bottom:52,left:64},p=2.5,q=4e4;Oci.Views.SupplyCurve=Backbone.View.extend({template:JST["app/scripts/templates/supplycurve.ejs"],el:".content",events:{"click #left-button":"goLeft","click #right-button":"goRight","click .share":"handleShare"},initialize:function(){a=this,$(window).on("resize",a.handleResize),$("body").keyup(a.handleKeyUp),this.tip=d3.tip().attr("class","d3-tip").html(function(a){var b=utils.numberWithCommas(a.ghgTotal),c=utils.numberWithCommas(a.productionVolume),d=utils.numberWithCommas(a.ghgTotal*a.productionVolume),e=[{name:"Total GHG per barrel",value:b},{name:"Production Volume",value:c},{name:"Total GHG",value:d}];return utils.createTooltipHtml(a.name,a.type,e,a.id,"A shallow, heavy, and sweet oil located off the California shore.")}).offset([-10,0]),a.render()},render:function(){this.$el.html(this.template()),this.chartInit(),this.linkShareButton(),utils.initDropdown()},linkShareButton:function(){var a=new ZeroClipboard($("#supply-curve-share"));a.on("ready",function(){a.on("copy",function(a){var b=a.clipboardData,c=utils.buildShareURLFromParameters({});b.setData("text/plain",c)}),a.on("aftercopy",function(){alert("The shareable URL has been copied to your clipboard.")
})})},setActiveRect:function(){var b=j[k];a.setLabelNameAndUrl(b),d3.selectAll("rect").classed("active",!1);var c="#index-"+k;d3.select(c).classed("active",!0)},formatStackedData:function(){m=0,j.sort(function(a,b){return b.ghgTotal-a.ghgTotal}),j.map(function(a,b,c){a.plotProductionVolume=a.productionVolume<q?q:a.productionVolume,a.x0=0===b?0:c[b-1].x0+c[b-1].plotProductionVolume,m+=c[b].plotProductionVolume})},buildDataset:function(a){for(var b=[],c=Object.keys(a.info),d=0;d<c.length;d++){var e=a.info[c[d]],f={id:utils.makeId(e.Unique),name:utils.prettyOilName(e),productionVolume:+e["Oil Production Volume"],ghgTotal:+e["Total Emissions"],type:e["Overall Crude Emissions Category"].trim()};b.push(f)}return b},chartInit:function(){var n=function(){e=d3.scale.linear().domain([0,m]).range([0,c]),f=d3.scale.linear().domain([0,d3.max(j,function(a){return 1*a.ghgTotal})]).range([d,0])},q=function(){g=d3.svg.axis().scale(e).orient("bottom").ticks(5),h=d3.svg.axis().scale(f).orient("left").ticks(5),i.append("g").attr("class","y axis").attr("transform","translate(0,0)").call(h),i.append("g").attr("class","x axis").attr("transform","translate(0,"+(d+4)+")").call(g);var a=i.append("g");a.append("title").text(utils.getUnits("productionVolume")).attr("class","x axis pop"),a.append("text").attr("transform","translate("+c/2+","+(d+o.bottom-5)+")").style("text-anchor","middle").attr("class","x axis title").text(utils.getDatasetName("productionVolume")),a=i.append("g"),a.append("title").text(utils.getUnits("ghgTotal","perBarrel")).attr("class","y axis pop"),a.append("text").attr("transform","rotate(-90)").attr("y",-o.left).attr("x",-(d/2)).attr("dy","1em").style("text-anchor","middle").attr("class","y axis title").text(utils.getDatasetName("ghgTotal","perBarrel"))},r=function(){i.selectAll("rect").data(j).enter().append("rect").attr("x",function(a){return e(a.x0)}).attr("y",function(a){return f(a.ghgTotal)}).attr("width",function(a){return e(a.plotProductionVolume)}).attr("height",function(a){return d-f(a.ghgTotal)}).attr("fill",function(a){return utils.categoryColorForType(a.type)}).attr("opacity",.8).attr("id",function(a,b){return"index-"+b}).on("click",function(b){a.setLabelNameAndUrl(b),d3.selectAll("rect").classed("active",!1),d3.select(this).classed("active",!0);var c=d3.select(this).attr("id");k=c.split("-")[1]}).on("mouseover",function(b){a.tip.show(b),$(".swatch").css("background",utils.categoryColorForType(b.type))}).on("mouseout",function(){utils.insideTooltip(d3.event.clientX,d3.event.clientY)?$(".d3-tip").on("mouseleave",function(){a.tip.hide()}):a.tip.hide()})};b=$("#supply-curve").parent(),c=b.width()-o.left-o.right,d=Math.round(c/p),i=d3.select("#supply-curve").append("svg").attr("width",c+o.left+o.right).attr("height",d+o.top+o.bottom).append("g").attr("transform","translate("+o.left+","+o.top+")"),i.call(a.tip),j=a.buildDataset(Oci.data),l=j,a.formatStackedData(),n(),q(),r(),k=Math.floor(j.length/2),a.setActiveRect(k)},setLabelNameAndUrl:function(a){var b=$("#name-label");b.text(a.name),b.attr("href","#oil/"+a.id)},goLeft:function(){k--,0>k&&(k=j.length-1),a.setActiveRect()},goRight:function(){k++,k>=j.length&&(k=0),a.setActiveRect()},handleKeyUp:function(b){37===b.keyCode?a.goLeft():39===b.keyCode&&a.goRight()},handleResize:function(){c=b.width()-o.left-o.right,d=Math.round(c/p),d3.select(n+" svg").remove(),a.chartInit()},handleShare:function(a){a.preventDefault()},shareOpen:function(){var a=utils.buildShareURLFromParameters({}),b=encodeURIComponent(utils.buildShareURLFromParameters({})),c=utils.generateSocialLinks(b);$("li.twitter a").attr("href",c.twitter),$("li.linkedin a").attr("href",c.linkedIn),$("li.email a").attr("href",c.mail),$("#share-copy").attr("value",a)}})}(),Oci.Views=Oci.Views||{},function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p="#compare-oils",q=1500,r={top:52,right:12,bottom:0,left:8},s=40,t=["upstream","midstream","downstream"];Oci.Views.CompareOils=Backbone.View.extend({template:JST["app/scripts/templates/compareoils.ejs"],el:".content",events:{"click #compare-oils-share":"handleShare","click #price-button":"showPrices","change #toggle-petcoke":"handleParametersChange","change .slider":"handleParametersChange","change .config-dropdown":"handleDropdown"},initialize:function(){a=this,e=!0,f="ghgTotal",g="perBarrel",this.tip=d3.tip().attr("class","d3-tip").html(function(a){var b=o.map(function(b){var c=_.find(b,function(b){return b.y===a.y});return{name:utils.capitalize(c.step),value:c.x.toFixed(0)}});return b.push({name:"Total",value:utils.numberWithCommas(a.ghgTotal)}),utils.createTooltipHtml(a.y,a.type,b,utils.makeId(a.y))}).offset([0,0]),this.render(),$(window).on("resize",a.handleResize),$("#sort-select").change(this.handleSortSelect),$("#step-select").change(this.handleStepSelect),$("#ratio-select").change(this.handleRatioSelect)},parseURLAndSetState:function(){var b=utils.parseParametersFromShareURL(window.location.href);window.history.pushState("","",window.location.hash.split("?")[0]),b.sortRatio&&(g=b.sortRatio,utils.setInputFieldOption("ratio-select",g)),b.sortStep&&(f=b.sortStep,utils.setInputFieldOption("step-select",f)),b.sortOrderDescending&&(e="true"===b.sortOrderDescending?!0:!1,utils.setInputFieldOption("sort-select",b.sortOrderDescending)),(b.opgee||b.prelim||b.showCoke)&&a.modelParametersView.setModelParameters(b)},linkShareButton:function(){var b=new ZeroClipboard($("#compare-oils-share"));b.on("ready",function(){b.on("copy",function(b){var c=b.clipboardData,d=a.modelParametersView.getModelValues(),h=utils.buildShareURLFromParameters({sortOrderDescending:e,sortStep:f,sortRatio:g,opgee:utils.getOPGEEModel(d.water,d.steam,d.flaring),prelim:utils.getPRELIMModel(d.refinery),showCoke:d.showCoke});c.setData("text/plain",h)}),b.on("aftercopy",function(){alert("The shareable URL has been copied to your clipboard.")})})},render:function(){this.$el.html(this.template()),this.modelParametersView=new Oci.Views.ModelParameters,this.$("#model-parameters").html(this.modelParametersView.render()),this.parseURLAndSetState(),this.chartInit(),this.linkShareButton(),utils.initDropdown()},createChartData:function(){o=[];for(var b=this.modelParametersView.getModelValues(),c={info:n.info,opgee:n.opgee[utils.getOPGEEModel(b.water,b.steam,b.flaring)],prelim:n.prelim[utils.getPRELIMModel(b.refinery)]},d=Object.keys(c.info),h=0;h<d.length;h++){var i=c.info[d[h]],j=c.opgee[d[h]],k=c.prelim[d[h]],l=+j["Net lifecycle emissions"],m=utils.getRefiningTotal(k),p=+i[utils.getDatasetKey("transport")],q=utils.getCombustionTotal(k,b.showCoke);l=+utils.getValueForRatio(l,g,k),m=+utils.getValueForRatio(m,g,k),p=+utils.getValueForRatio(p,g,k),q=+utils.getValueForRatio(q,g,k);var r=d3.sum([l,m,p,q]),s={id:utils.makeId(i.Unique),name:utils.prettyOilName(i),apiGravity:+i[utils.getDatasetKey("apiGravity")],oilDepth:+i[utils.getDatasetKey("oilDepth")],ghgTotal:r,upstream:l,midstream:m,downstream:q+p,waterToOilRatio:+j[utils.getDatasetKey("waterToOilRatio")],gasToOilRatio:+j[utils.getDatasetKey("gasToOilRatio")],type:i["Overall Crude Emissions Category"].trim()};o.push(s)}a.sortByField(o,f,e),o=t.map(function(a){return o.map(function(b){return{x:b.name,y:b[a],type:b.type,ghgTotal:b.ghgTotal}})});var u=d3.layout.stack();u(o),o=o.map(function(a){return a.map(function(a){return{x:a.y,y:a.x,x0:a.y0,type:a.type,ghgTotal:a.ghgTotal}})})},sortByField:function(a,b,c){a.sort(c?function(a,c){return c[b]-a[b]}:function(a,c){return a[b]-c[b]})},chartInit:function(){var e=function(){var a=d3.max(o,function(a){return d3.max(a,function(a){return a.x+a.x0})});h=d3.scale.linear().domain([0,a]).range([0,c]).nice();var b=o[0].map(function(a){return a.y});i=d3.scale.ordinal().domain(b).rangeRoundBands([0,d],.05),j=d3.scale.ordinal().domain(["upstream","midstream","downstream"]).rangePoints([1,.4])},f=function(){var b=m.selectAll("g").data(o).enter().append("g").classed("step",!0).attr("class",function(a,b){return"step "+t[b]});b.selectAll("rect").data(function(a,b){return a.map(function(a){a.step=t[b]}),a},function(a){return a.y}).enter().append("rect").attr("x",function(a){return h(a.x0)}).attr("y",function(a){return i(a.y)}).attr("height",function(){return i.rangeBand()}).attr("width",function(a){return h(a.x)}).attr("fill",function(a){return utils.categoryColorForType(a.type)}).attr("opacity",function(a){return j(a.step)}).on("mouseover",function(b){a.tip.show(b),$(".swatch").css("background",utils.categoryColorForType(b.type)),$('.stats-list dt:contains("'+utils.capitalize(b.step)+'")').css("color","orange"),$('.stats-list dt:contains("'+utils.capitalize(b.step)+'")').next().css("color","orange"),$('.stats-list dt:contains("Total")').addClass("total"),$('.stats-list dt:contains("Total")').next().addClass("total")}).on("mouseleave",function(){utils.insideTooltip(d3.event.clientX,d3.event.clientY)?$(".d3-tip").on("mouseleave",function(){a.tip.hide()}):a.tip.hide()})},q=function(){l=d3.svg.axis().scale(h).orient("top"),k=d3.svg.axis().scale(i).orient("right"),m.append("g").attr("class","y axis").call(k),m.selectAll(".y.axis text").attr("pointer-events","none"),m.append("g").attr("class","x axis").call(l);var b=m.append("g");b.append("title").text(utils.getUnits("ghgTotal",g)).attr("class","x axis pop"),b.append("text").attr("transform","translate("+c/2+",-40)").style("text-anchor","middle").attr("class","x axis title").text(a.getXAxisTitle())};b=$(p),c=b.width()-r.left-r.right,m=d3.select(p).append("svg").attr("width",c+r.left+r.right).append("g").attr("transform","translate("+r.left+","+r.top+")"),m.call(a.tip),n=utils.cloneObject(Oci.data);var u=Object.keys(Oci.data.info).length;d=s*u,d3.select(p+" svg").attr("height",d+r.top+r.bottom),a.createChartData(),e(),f(),q()},handleSortSelect:function(){e=!e,a.createChartData(),a.updateChart()},handleStepSelect:function(){for(var b,c=document.getElementsByName("step-select"),d=0;d<c.length;d++)if(c[d].checked){b=c[d].value,f=b;break}a.createChartData(),a.updateChart()},handleRatioSelect:function(){for(var b,c=document.getElementsByName("ratio-select"),d=0;d<c.length;d++)if(c[d].checked){b=c[d].value,g=b;break}a.createChartData(),a.updateChart()},updateChart:function(){a.updateScales(),a.updateAxes(),a.updateData()},updateData:function(){var a=m.selectAll(".step").data(o);a.selectAll("rect").data(function(a,b){return a.map(function(a){a.step=t[b]}),a},function(a){return a.y}).transition().duration(q).attr("x",function(a){return h(a.x0)}).attr("y",function(a){return i(a.y)}).attr("height",function(){return i.rangeBand()}).attr("width",function(a){return h(a.x)})},updateScales:function(){var a=d3.max(o,function(a){return d3.max(a,function(a){return a.x+a.x0})});h.domain([0,a]).nice();var b=o[0].map(function(a){return a.y});i.domain(b)},updateAxes:function(){m.select(".y.axis").transition().duration(q).call(k),m.select(".x.axis").transition().duration(q).call(l),$(".x.axis.title").fadeOut(q/2,function(){m.select(".x.axis.pop").text(utils.getUnits(f,g)),m.select(".x.axis.title").text(a.getXAxisTitle()),$(this).fadeIn(q/2)})},handleShare:function(a){a.preventDefault()},showPrices:function(a){a.preventDefault(),Oci.showPricesModal(!0)},updatePrices:function(){a.createChartData(),a.updateChart()},handleResize:function(){c=b.width()-r.left-r.right,d3.select(p+" svg").remove(),a.chartInit()},getXAxisTitle:function(){return utils.getDatasetName(f,g)},handleDropdown:function(){$(".config-dropdown").blur(),a.handleParametersChange()},handleParametersChange:function(){a.createChartData(),a.updateChart()},shareOpen:function(){var b=a.modelParametersView.getModelValues(),c=utils.buildShareURLFromParameters({sortOrderDescending:e,sortStep:f,sortRatio:g,opgee:utils.getOPGEEModel(b.water,b.steam,b.flaring),prelim:utils.getPRELIMModel(b.refinery),showCoke:b.showCoke}),d=encodeURIComponent(utils.buildShareURLFromParameters({})),h=utils.generateSocialLinks(d);$("li.twitter a").attr("href",h.twitter),$("li.linkedin a").attr("href",h.linkedIn),$("li.email a").attr("href",h.mail),$("#share-copy").attr("value",c)}})}(),Oci.Views=Oci.Views||{},function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r="#emissions-drivers",s={top:8,right:8,bottom:52,left:64},t=1.5,u=1e3,v=.1;Oci.Views.EmissionsDrivers=Backbone.View.extend({template:JST["app/scripts/templates/emissionsdrivers.ejs"],el:".content",events:{"click #x-select":"changeXProperty","click #y-select":"changeYProperty","click #ratio-select":"handleRatioSelect","click #emissions-drivers-share":"handleShare",click:"hideTip","click #price-button":"showPrices","change #toggle-petcoke":"handleParametersChange","change .slider":"handleParametersChange","change .config-dropdown":"handleDropdown"},hideTip:function(){a.tip.hide()},initialize:function(){a=this,$(window).on("resize",a.handleResize),a.tip=d3.tip().attr("class","d3-tip").html(function(a){var b=[{name:utils.getDatasetName(o),value:a[o].toFixed(0)},{name:utils.getDatasetName(p).split(" ").pop(),value:a[p].toFixed(0)},{name:"Production Volume",value:utils.numberWithCommas(a.productionVolume)}];return utils.createTooltipHtml(a.name,a.type,b,a.id)}).offset([-10,0]),o="apiGravity",p="ghgTotal",q="perBarrel",a.render()},parseURLAndSetState:function(){var b=utils.parseParametersFromShareURL(window.location.href);window.history.pushState("","",window.location.hash.split("?")[0]),b.xProperty&&(o=b.xProperty,utils.setInputFieldOption("x-select",o)),b.yProperty&&(p=b.yProperty,utils.setInputFieldOption("y-select",p)),b.sortRatio&&(q=b.sortRatio,utils.setInputFieldOption("ratio-select",q)),(b.opgee||b.prelim||b.showCoke)&&a.modelParametersView.setModelParameters(b)},linkShareButton:function(){var b=new ZeroClipboard($("#emissions-drivers-share"));b.on("ready",function(){b.on("copy",function(b){var c=b.clipboardData,d=a.modelParametersView.getModelValues(),e=utils.buildShareURLFromParameters({xProperty:o,yProperty:p,opgee:utils.getOPGEEModel(d.water,d.steam,d.flaring),prelim:utils.getPRELIMModel(d.refinery),showCoke:d.showCoke});c.setData("text/plain",e)}),b.on("aftercopy",function(){alert("The shareable URL has been copied to your clipboard.")})})},render:function(){this.$el.html(this.template()),this.modelParametersView=new Oci.Views.ModelParameters,this.$("#model-parameters").html(this.modelParametersView.render()),this.parseURLAndSetState(),this.chartInit(),this.linkShareButton(),utils.initDropdown()},addExtentBuffer:function(a){return"object"==typeof a?(a[0]=a[0]*(1-v),a[1]=a[1]*(1+v)):a*=1+v,a},chartInit:function(){var u=function(){var b=a.addExtentBuffer(d3.max(k,function(a){return a[o]}));e=d3.scale.linear().domain([0,b]).range([0,c]);var h=a.addExtentBuffer(d3.extent(k,function(a){return a[p]}));f=d3.scale.linear().domain(h).range([d,0]);var i=a.addExtentBuffer(d3.extent(k,function(a){return a.productionVolume}));g=d3.scale.sqrt().domain(i).range([4,42])},v=function(){h=d3.svg.axis().scale(e).orient("bottom").ticks(5),i=d3.svg.axis().scale(f).orient("left").ticks(5),l.append("g").attr("class","x axis").attr("transform","translate(0,"+(d+4)+")").call(h);var a=l.append("g");a.append("title").text(utils.getUnits(o,q)).attr("class","x axis pop"),a.append("text").attr("transform","translate("+c/2+","+(d+s.bottom-5)+")").style("text-anchor","middle").attr("class","x axis title").text(utils.getDatasetName(o)),l.append("g").attr("class","y axis").attr("transform","translate(-4,0)").call(i),a=l.append("g"),a.append("title").text(utils.getUnits(p,q)).attr("class","y axis pop"),a.append("text").attr("transform","rotate(-90)").attr("y",-s.left).attr("x",-(d/2)).attr("dy","1em").style("text-anchor","middle").attr("class","y axis title").text(utils.getDatasetName(p,q))},w=function(){l.selectAll("circle").data(k).enter().append("circle").attr("fill",function(a){return utils.categoryColorForType(a.type)}).attr("opacity",.8).attr("cx",function(a){return e(a[o])}).attr("cy",function(a){return f(a[p])}).attr("r",function(a){return g(a.productionVolume)}).attr("clip-path","url(#chart-area)").on("mouseover",function(b){a.tip.show(b),$(".swatch").css("background",utils.categoryColorForType(b.type))}).on("mouseout",function(){utils.insideTooltip(d3.event.clientX,d3.event.clientY)?$(".d3-tip").on("mouseleave",function(){a.tip.hide()}):a.tip.hide()})},x=function(){var a=k.map(function(a){return[e(a[o]),f(a[p])]});n=ss.linear_regression().data(a).line();var b=ss.r_squared(a,n);m=d3.svg.line().x(function(a){return a}).y(function(a){return n(a)}),l.append("path").attr("clip-path","url(#chart-area)").attr("d",m(e.range())).attr("class","trend").attr("opacity",Math.min(b+.2,1))};b=$(r),c=b.width()-s.left-s.right,d=Math.round(c/t),l=d3.select(r).append("svg").attr("width",c+s.left+s.right).attr("height",d+s.top+s.bottom).append("g").attr("transform","translate("+s.left+","+s.top+")"),l.call(a.tip),l.append("clipPath").attr("id","chart-area").append("rect").attr("width",c).attr("height",d),j=utils.cloneObject(Oci.data),a.createChartData(),u(),v(),x(),w()},createChartData:function(){k=[];for(var a=this.modelParametersView.getModelValues(),b={info:j.info,opgee:j.opgee[utils.getOPGEEModel(a.water,a.steam,a.flaring)],prelim:j.prelim[utils.getPRELIMModel(a.refinery)]},c=Object.keys(b.info),d=0;d<c.length;d++){var e=b.info[c[d]],f=b.opgee[c[d]],g=b.prelim[c[d]],h=+f["Net lifecycle emissions"],i=utils.getRefiningTotal(g),l=+e[utils.getDatasetKey("transport")],m=utils.getCombustionTotal(g,a.showCoke);h=+utils.getValueForRatio(h,q,g),i=+utils.getValueForRatio(i,q,g),l=+utils.getValueForRatio(l,q,g),m=+utils.getValueForRatio(m,q,g);var n=d3.sum([h,i,l,m]),o={id:utils.makeId(e.Unique),name:utils.prettyOilName(e),apiGravity:+e[utils.getDatasetKey("apiGravity")],oilDepth:+e[utils.getDatasetKey("oilDepth")],ghgTotal:n,productionVolume:+e[utils.getDatasetKey("productionVolume")],upstream:h,midstream:i,downstream:m+l,waterToOilRatio:+f[utils.getDatasetKey("waterToOilRatio")],gasToOilRatio:+f[utils.getDatasetKey("gasToOilRatio")],type:e["Overall Crude Emissions Category"].trim()};k.push(o)}k.sort(function(a,b){return b.productionVolume-a.productionVolume})},changeXProperty:function(){for(var b=document.getElementsByName("x-select"),c=0;c<b.length;c++)if(b[c].checked){o=b[c].value;break}a.updateChart("x")},changeYProperty:function(){for(var b=document.getElementsByName("y-select"),c=0;c<b.length;c++)if(b[c].checked){p=b[c].value;break}a.updateChart("y")},handleRatioSelect:function(){for(var b,c=document.getElementsByName("ratio-select"),d=0;d<c.length;d++)if(c[d].checked){b=c[d].value,q=b;break}a.createChartData(),a.updateChart("y")},updateScales:function(){var b=a.addExtentBuffer(d3.max(k,function(a){return a[o]}));e.domain([0,b]);var c=a.addExtentBuffer(d3.extent(k,function(a){return a[p]}));f.domain(c)},updateAxes:function(a){a&&"x"!==a||(l.select(".x.axis").transition().duration(u).call(h),$(".x.axis.title").fadeOut(u/2,function(){l.select(".x.axis.pop").text(utils.getUnits(o,q)),l.select(".x.axis.title").text(utils.getDatasetName(o)),$(this).fadeIn(u/2)})),a&&"y"!==a||(l.select(".y.axis").transition().duration(u).call(i),$(".y.axis.title").fadeOut(u/2,function(){l.select(".y.axis.pop").text(utils.getUnits(p,q)),l.select(".y.axis.title").text(utils.getDatasetName(p,q)),$(this).fadeIn(u/2)}))},updateData:function(){l.selectAll("circle").data(k).transition().duration(u).attr("cx",function(a){return e(a[o])}).attr("cy",function(a){return f(a[p])})},updateLine:function(){var a=k.map(function(a){return[e(a[o]),f(a[p])]});n=ss.linear_regression().data(a).line();var b=ss.r_squared(a,n);l.select(".trend").transition().duration(u).attr("d",m(e.range())).attr("opacity",Math.min(b+.2,1))},updateChart:function(b){a.updateScales(),a.updateAxes(b),a.updateLine(),a.updateData()},handleShare:function(a){a.preventDefault()},handleResize:function(){c=b.width()-s.left-s.right,d=Math.round(c/t),d3.select(r+" svg").remove(),a.chartInit()},showPrices:function(a){a.preventDefault(),Oci.showPricesModal(!0)},updatePrices:function(){a.createChartData(),a.updateChart("y")},handleDropdown:function(){$(".config-dropdown").blur(),a.handleParametersChange()},handleParametersChange:function(){a.createChartData(),a.updateChart()},shareOpen:function(){var b=a.modelParametersView.getModelValues(),c=utils.buildShareURLFromParameters({xProperty:o,yProperty:p,opgee:utils.getOPGEEModel(b.water,b.steam,b.flaring),prelim:utils.getPRELIMModel(b.refinery),showCoke:b.showCoke}),d=encodeURIComponent(utils.buildShareURLFromParameters({})),e=utils.generateSocialLinks(d);$("li.twitter a").attr("href",e.twitter),$("li.linkedin a").attr("href",e.linkedIn),$("li.email a").attr("href",e.mail),$("#share-copy").attr("value",c)}})}(),Oci.Views=Oci.Views||{},function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m={top:0,right:10,bottom:0,left:0},n=60-m.top-m.bottom,o=2,p="#ccc";Oci.Views.OilDetails=Backbone.View.extend({template:JST["app/scripts/templates/oildetails.ejs"],el:".content",events:{"change #toggle-petcoke":"handleParametersChange","change .slider":"handleParametersChange","change .config-dropdown":"handleDropdown","click #oil-details-share":"handleShare"},initialize:function(b){a=this;for(var c in Oci.data.info)if(utils.makeId(c)===b.oil){l=c;break}l||console.warn("Unable to find key for oil id"),a.tip=d3.tip().attr("class","d3-tip").html(function(b,c){for(var d="",e=b.components[c[0][0].parentNode.parentNode.id.split("-")[0]],f=0;f<e.length;f++)d+='<dt style="width:80%;">'+e[f].name+"</dt>",d+='<dd style="width:20%;">'+Number(e[f].value).toFixed(2)+"</dd>";return'<div class="popover in"><div class="popover-inner"><div class="popover-header"><dl class="stats-list"><dt>'+c[0][0].parentNode.parentNode.id.split("-")[0]+"</dt><dd>"+a.dataForSvg(c,b).toFixed(2)+'</dd></dl></div><div class="popover-body"><dl class="stats-list">'+d+"</dl></div></div></div>"}).offset(function(b,c){return a.dataForSvg(c,b)<.3*f.domain()[1]?[0,25]:[-10,0]}).direction(function(b,c){return a.dataForSvg(c,b)<.3*f.domain()[1]?"e":"n"}),a.oil=a.generateOilInfo(),this.render(),$(window).on("resize",a.handleResize)},render:function(){this.$el.html(this.template({oil:this.oil})),this.modelParametersView=new Oci.Views.ModelParameters,this.$("#model-parameters").html(this.modelParametersView.render()),d=n*(1/3)-o,e=n-d,$("#oil-details-description").html("A shallow, heavy, and sweet oil located off the California shore."),L.mapbox.accessToken="pk.eyJ1IjoiZGV2c2VlZCIsImEiOiJnUi1mbkVvIn0.018aLhX0Mb0tdtaT2QNe2Q";var a=L.mapbox.map("map","mapbox.light",{center:[20,0],zoom:3,zoomControl:!1,keyboard:!1,tap:!1,dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1});_.each(Oci.data.info,function(b){var c=L.divIcon({html:'<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" version="1.1" width="24" height="24" id="svg4460"> <defs id="defs4462" /> <metadata id="metadata4465"> <rdf:RDF> <cc:Work rdf:about=""> <dc:format>image/svg+xml</dc:format> <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage" /> <dc:title /> </cc:Work> </rdf:RDF> </metadata> <g transform="translate(0,-1028.3622)" id="layer1"> <g transform="translate(-476,-237.99998)" id="oil-well-24" style="display:inline"> <g transform="translate(2,0)" id="g7345"> <path d="m 484.5,1269.3622 c -0.5,0 -0.84615,0.5 -1,1 l -5.34375,15.9688 c -0.038,0.1133 -0.15625,0.4166 -0.15625,0.5312 0,0.5 0.5,0.5 1,0.5 0.5,0 0.97049,0 1.15625,-0.5 l 0.84375,-2.25 5.5,-2.75 5.5,2.75 0.84375,2.25 c 0.18576,0.5 0.65625,0.5 1.15625,0.5 0.5,0 1,0 1,-0.5 0,-0.1146 -0.11823,-0.418 -0.15625,-0.5312 L 489.5,1270.3622 c -0.15385,-0.5 -0.5,-1 -1,-1 z m 4.5,7 0.6875,1.9063 -3.1875,1.5937 -3.1875,-1.5937 0.6875,-1.9063 z m -6.3125,3.5938 1.8125,0.9062 -2.625,1.3125 z m 7.625,0 0.8125,2.2187 -2.625,-1.3125 z" inkscape:connector-curvature="0" id="path5656" style="opacity:0.3;color:#000000;fill:#ffffff;fill-opacity:1;fill-rule:nonzero;stroke:#ffffff;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" /> <path d="m 484.5,1269.3622 c -0.5,0 -0.84615,0.5 -1,1 l -5.34375,15.9688 c -0.038,0.1133 -0.15625,0.4166 -0.15625,0.5312 0,0.5 0.5,0.5 1,0.5 0.5,0 0.97049,0 1.15625,-0.5 l 0.84375,-2.25 5.5,-2.75 5.5,2.75 0.84375,2.25 c 0.18576,0.5 0.65625,0.5 1.15625,0.5 0.5,0 1,0 1,-0.5 0,-0.1146 -0.11823,-0.418 -0.15625,-0.5312 L 489.5,1270.3622 c -0.15385,-0.5 -0.5,-1 -1,-1 z m 4.5,7 0.6875,1.9063 -3.1875,1.5937 -3.1875,-1.5937 0.6875,-1.9063 z m -6.3125,3.5938 1.8125,0.9062 -2.625,1.3125 z m 7.625,0 0.8125,2.2187 -2.625,-1.3125 z" inkscape:connector-curvature="0" id="path6960-9" style="color:#000000;fill:#444444;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:2;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" /> </g> </g> </g> <rect width="24" height="24" x="0" y="0" id="canvas" style="fill:none;stroke:none;visibility:hidden" /> </svg>',iconSize:[24,24],iconAnchor:[12,12],className:l===b.Unique?"active":"non-active"});L.marker([b.Latitude,b.Longitude],{icon:c,clickable:!1}).addTo(a)});var b=Oci.data.info[l];a.setView([b.Latitude,b.Longitude],4),this.parseURLAndSetState(),this.chartInit(),this.linkShareButton(),utils.initDropdown()},generateOilInfo:function(){var a=Oci.data.info[l];a||console.warn("Unable to find oil for id:",l);var b=function(a,b){return"API Gravity: "+parseInt(a)+" | Sulfur Percentage: "+parseFloat(b).toFixed(2)+"%"},c=function(a){return parseInt(a)+" feet | "+parseInt(.3048*a)+" meters"},d={name:utils.prettyOilName(a),keyStats:[{key:"Type",value:a["Overall Crude Emissions Category"]},{key:"Location",value:a.Country+" "+a["Onshore/Offshore"]},{key:"Category",value:a["Sulfur Category"],title:b(a.API,a["Sulfur %wt"])},{key:"Depth",value:a["Shallow; Deep; Ultra-Deep"],title:c(a["Field Depth"])},{key:"Production Volume",value:a["Production Volume"]},{key:"Flare Rate",value:a["Flaring Class"]},{key:"Water Content",value:a["Watery Oil"]},{key:"Gas Content",value:a["Gassy Oil"]},{key:"*Refinery Distance*",value:"1,000 miles",title:"1609 kilometers"},{key:"Refinery Type",value:a["Default Refinery"]}]};return d},parseURLAndSetState:function(){var b=utils.parseParametersFromShareURL(window.location.href);window.history.pushState("","",window.location.hash.split("?")[0]),(b.opgee||b.prelim||b.showCoke)&&a.modelParametersView.setModelParameters(b)},linkShareButton:function(){var b=new ZeroClipboard($("#oil-details-share"));b.on("ready",function(){b.on("copy",function(b){var c=b.clipboardData,d=a.modelParametersView.getModelValues(),e=utils.buildShareURLFromParameters({opgee:utils.getOPGEEModel(d.water,d.steam,d.flaring),prelim:utils.getPRELIMModel(d.refinery),showCoke:d.showCoke});c.setData("text/plain",e)}),b.on("aftercopy",function(){alert("The shareable URL has been copied to your clipboard.")})})},updateSvg:function(b){b.selectAll("rect").data(k).transition().duration(1e3).attr("width",function(c){return f(a.dataForSvg(b,c))})},createChartData:function(){var a=function(a,b,c){var d=a.info[l],e=a.opgee[l],f=a.prelim[l],g=+e["Net lifecycle emissions"],h=+utils.getRefiningTotal(f),i=+d[utils.getDatasetKey("transport")],j=+utils.getCombustionTotal(f,b),k=d3.sum([g,h,i,j]),m={isDefault:c,id:utils.makeId(d.Unique),name:utils.prettyOilName(d),apiGravity:+d[utils.getDatasetKey("apiGravity")],oilDepth:+d[utils.getDatasetKey("oilDepth")],ghgTotal:k,upstream:g,midstream:h,downstream:j+i,waterToOilRatio:+e[utils.getDatasetKey("waterToOilRatio")],gasToOilRatio:+e[utils.getDatasetKey("gasToOilRatio")],type:d["Overall Crude Emissions Category"].trim(),components:{downstream:utils.getDownstreamComponents(f,b,i),midstream:utils.getRefiningComponents(f),upstream:utils.getExtractionComponents(e)}};return m},b={info:j.info,opgee:j.opgee[utils.getOPGEEModel("1","1","1")],prelim:j.prelim[utils.getPRELIMModel("0 = Default")]},c=this.modelParametersView.getModelValues(),d={info:j.info,opgee:j.opgee[utils.getOPGEEModel(c.water,c.steam,c.flaring)],prelim:j.prelim[utils.getPRELIMModel(c.refinery)]};k=[a(b,!0,!0),a(d,c.showCoke,!1)]},dataForSvg:function(a,b){return a===g?b.upstream:a===i?b.downstream:a===h?b.midstream:void console.warn("oops!")},handleParametersChange:function(){a.createChartData(),$("#model-total").html(k[1].ghgTotal.toFixed(0)),a.updateSvg(g),a.updateSvg(i),a.updateSvg(h)},chartInit:function(){var l=function(){f=d3.scale.linear().domain([0,d3.max(k,function(a){return d3.max([a.upstream,a.midstream,a.downstream])})]).range([0,c])},q=function(b){$("#model-total").html(k[1].ghgTotal.toFixed(0)),$("#default-total").html("("+k[0].ghgTotal.toFixed(0)+")"),$("#od-chart-cont .data-charts .value").css("color",utils.categoryColorForType(k[1].type)),$("#oil-name").html(a.oil.name),b.selectAll("rect").data(k).enter().append("rect").attr("x",function(){return f(0)}).attr("y",function(a){return a.isDefault?e+o:0}).attr("width",function(c){return f(a.dataForSvg(b,c))}).attr("height",function(a){return a.isDefault?d:e}).attr("rx",2).attr("ry",2).attr("fill",function(a){return a.isDefault?p:utils.categoryColorForType(a.type)}).attr("opacity",function(a){return a.isDefault?.6:.8}).on("mouseover",function(c){c.isDefault||a.tip.show(c,b)}).on("mouseout",function(b){b.isDefault||(utils.insideTooltip(d3.event.clientX,d3.event.clientY)?$(".d3-tip").on("mouseleave",function(){a.tip.hide()}):a.tip.hide())})};b=$(".panel-body"),c=b.width()-m.left-m.right,g=d3.select("#upstream-bar").append("svg").attr("width",c+m.left+m.right).attr("height",n+m.top+m.bottom).append("g").attr("transform","translate("+m.left+","+m.top+")"),i=d3.select("#downstream-bar").append("svg").attr("width",c+m.left+m.right).attr("height",n+m.top+m.bottom).append("g").attr("transform","translate("+m.left+","+m.top+")"),h=d3.select("#midstream-bar").append("svg").attr("width",c+m.left+m.right).attr("height",n+m.top+m.bottom).append("g").attr("transform","translate("+m.left+","+m.top+")"),g.call(a.tip),h.call(a.tip),i.call(a.tip),j=utils.cloneObject(Oci.data),a.createChartData(),l(),q(g),q(h),q(i)},handleDropdown:function(){$(".config-dropdown").blur(),a.handleParametersChange()},handleResize:function(){c=b.width()-m.left-m.right,a.render()},handleShare:function(a){a.preventDefault()},shareOpen:function(){var b=a.modelParametersView.getModelValues(),c=utils.buildShareURLFromParameters({opgee:utils.getOPGEEModel(b.water,b.steam,b.flaring),prelim:utils.getPRELIMModel(b.refinery),showCoke:b.showCoke}),d=encodeURIComponent(utils.buildShareURLFromParameters({})),e=utils.generateSocialLinks(d);$("li.twitter a").attr("href",e.twitter),$("li.linkedin a").attr("href",e.linkedIn),$("li.email a").attr("href",e.mail),$("#share-copy").attr("value",c)}})}(),Oci.Views=Oci.Views||{},function(){"use strict";var a;Oci.Views.Prices=Backbone.View.extend({template:JST["app/scripts/templates/prices.ejs"],el:"#modal-prices",events:{"click .apply":"handleApply","click [data-modal-dismiss]":"handleDismissClick","keyup .price-input":"verifyPrice"},initialize:function(){a=this,this.render(),this.loadPrices()},render:function(){this.$el.html(this.template())},loadPrices:function(){for(var a in Oci.prices){var b='input[name="'+a+'"]';$(b).val(parseFloat(Oci.prices[a].price).toFixed(2))}},handleDismissClick:function(b){b.preventDefault(),Oci.showPricesModal(!1),a.loadPrices()},handleApply:function(a){a.preventDefault(),Oci.showPricesModal(!1);for(var b in Oci.prices){var c='input[name="'+b+'"]',d=$(c),e=parseFloat(d.val()).toFixed(2);d.val(e),Oci.prices[b].price=e}Oci.view.updatePrices&&Oci.view.updatePrices()},verifyPrice:function(a){var b=a.target,c=/^\d{0,5}(\.\d{0,2})?$/.test(b.value);if(!c){var d=b.value;d=d.replace(/[^\d.]/g,""),d=parseFloat(d).toFixed(2),(isNaN(d)||d.length>=9)&&(d=parseFloat(2).toFixed(2)),b.value=d
}}})}(),Oci.Views=Oci.Views||{},function(){"use strict";var a;Oci.Views.ModelParameters=Backbone.View.extend({template:JST["app/scripts/templates/modelparameters.ejs"],el:"#model-parameters",events:{"click .toggle":"toggleModelParameters","change input":"updateSummary","change .slider":"updateSummary","change select":"updateSummary"},initialize:function(){a=this},render:function(){this.$el.html(this.template()),this.addSliders(),this.updateSummary()},getModelValues:function(){return{water:$("#slider-water").val()/100,steam:$("#slider-steam").val()/100,flaring:$("#slider-flaring").val()/100,refinery:$("#dropdown-refinery").val(),showCoke:$("#toggle-petcoke").is(":checked")}},setModelParameters:function(b){if(b.opgee)try{var c=b.opgee[3],d=b.opgee[4],e=b.opgee[5],f=100*parseFloat(Oci.data.metadata.water.split(",")[c]);$("#slider-water").val(f),f=100*parseFloat(Oci.data.metadata.steam.split(",")[d]),$("#slider-steam").val(f),f=100*parseFloat(Oci.data.metadata.flare.split(",")[e]),$("#slider-flaring").val(f)}catch(g){console.warn("bad input parameter")}if(b.prelim)try{var h=b.prelim[3];$("#dropdown-refinery").prop("selectedIndex",h)}catch(g){console.warn("bad input parameter",g)}void 0!==b.showCoke&&("false"===b.showCoke?$("#toggle-petcoke").attr("checked",!1):"true"===b.showCoke&&$("#toggle-petcoke").attr("checked",!0)),a.updateSummary()},updateSummary:function(){var a=parseInt($("#slider-flaring").val());$(".value.flare span").html(a+"%");var b=parseInt($("#slider-water").val());$(".value.water span").html(b+"%");var c=parseInt($("#slider-steam").val());$(".value.steam span").html(c+"%");var d=$("#toggle-petcoke").is(":checked")?"On":"Off";$(".value.petcoke span").html(d);var e=$("#dropdown-refinery").val();switch(e){case"0 = Default":e="Default";break;case"1 = Hydroskimming":e="Hydro";break;case"2 = Medium Conversion":e="Medium";break;case"3 = Deep Coking":e="Deep Coke";break;case"4 = Deep Hydrotreating":e="Deep Hydro"}$(".value.refinery span").html(e)},addSliders:function(){$("#slider-flaring").noUiSlider({start:100,connect:"lower",snap:!0,range:{min:10,"72%":75,max:100}}),$("#slider-flaring").noUiSlider_pips({mode:"values",values:[10,75,100],density:10,stepped:!0}),$("#slider-steam").noUiSlider({start:100,connect:"lower",snap:!0,range:{min:75,"50%":100,max:125}}),$("#slider-steam").noUiSlider_pips({mode:"values",values:[75,100,125],density:10,stepped:!0}),$("#slider-water").noUiSlider({start:100,connect:"lower",snap:!0,range:{min:50,"25%":75,"50%":100,"75%":125,max:150}}),$("#slider-water").noUiSlider_pips({mode:"values",values:[50,75,100,125,150],density:10,stepped:!0})},toggleModelParameters:function(a){a.preventDefault(),$("#model-parameters").toggleClass("open")}})}();